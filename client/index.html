<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="engine/bundle.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="./ui-builder/index.js"></script>
    <script src="./bundle.js"></script>
</head>

<body style="margin: 0px auto; padding: 0px">

    <div id="root" style="width: 100%; height: 100vh;">

    </div>

</body>

<script>

    let root = document.getElementById('root')

    let { Applet, Native, Utils } = window.engine

    let uiDriver = new UIDriver(Utils.compiler.styleToCssString)

    let applet = new Applet('frame')
    applet.fill(
        {"type":"Program","start":0,"end":2047,"body":[{"type":"ClassDeclaration","start":5,"end":2046,"id":{"type":"Identifier","start":11,"end":17,"name":"Button"},"superClass":null,"body":{"type":"ClassBody","start":18,"end":2046,"body":[{"type":"MethodDefinition","start":28,"end":148,"static":false,"computed":false,"key":{"type":"Identifier","start":28,"end":39,"name":"constructor"},"kind":"constructor","value":{"type":"FunctionExpression","start":39,"end":148,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":42,"end":148,"body":[{"type":"ExpressionStatement","start":56,"end":138,"expression":{"type":"AssignmentExpression","start":56,"end":138,"operator":"=","left":{"type":"MemberExpression","start":56,"end":66,"object":{"type":"ThisExpression","start":56,"end":60},"property":{"type":"Identifier","start":61,"end":66,"name":"state"},"computed":false,"optional":false},"right":{"type":"ObjectExpression","start":69,"end":138,"properties":[{"type":"Property","start":87,"end":96,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":87,"end":92,"name":"items"},"value":{"type":"ArrayExpression","start":94,"end":96,"elements":[]},"kind":"init"},{"type":"Property","start":114,"end":124,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":114,"end":121,"name":"counter"},"value":{"type":"Literal","start":123,"end":124,"value":0,"raw":"0"},"kind":"init"}]}}}]}}},{"type":"MethodDefinition","start":157,"end":368,"static":false,"computed":false,"key":{"type":"Identifier","start":157,"end":164,"name":"onMount"},"kind":"method","value":{"type":"FunctionExpression","start":164,"end":368,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":167,"end":368,"body":[{"type":"ExpressionStatement","start":181,"end":358,"expression":{"type":"CallExpression","start":181,"end":358,"callee":{"type":"Identifier","start":181,"end":192,"name":"setInterval"},"arguments":[{"type":"ArrowFunctionExpression","start":193,"end":351,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":199,"end":351,"body":[{"type":"ExpressionStatement","start":217,"end":237,"expression":{"type":"UpdateExpression","start":217,"end":237,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":217,"end":235,"object":{"type":"MemberExpression","start":217,"end":227,"object":{"type":"ThisExpression","start":217,"end":221},"property":{"type":"Identifier","start":222,"end":227,"name":"state"},"computed":false,"optional":false},"property":{"type":"Identifier","start":228,"end":235,"name":"counter"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":254,"end":295,"expression":{"type":"CallExpression","start":254,"end":295,"callee":{"type":"MemberExpression","start":254,"end":275,"object":{"type":"MemberExpression","start":254,"end":270,"object":{"type":"MemberExpression","start":254,"end":264,"object":{"type":"ThisExpression","start":254,"end":258},"property":{"type":"Identifier","start":259,"end":264,"name":"state"},"computed":false,"optional":false},"property":{"type":"Identifier","start":265,"end":270,"name":"items"},"computed":false,"optional":false},"property":{"type":"Identifier","start":271,"end":275,"name":"push"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":276,"end":294,"object":{"type":"MemberExpression","start":276,"end":286,"object":{"type":"ThisExpression","start":276,"end":280},"property":{"type":"Identifier","start":281,"end":286,"name":"state"},"computed":false,"optional":false},"property":{"type":"Identifier","start":287,"end":294,"name":"counter"},"computed":false,"optional":false}],"optional":false}},{"type":"ExpressionStatement","start":312,"end":337,"expression":{"type":"CallExpression","start":312,"end":337,"callee":{"type":"MemberExpression","start":312,"end":325,"object":{"type":"ThisExpression","start":312,"end":316},"property":{"type":"Identifier","start":317,"end":325,"name":"setState"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":326,"end":336,"object":{"type":"ThisExpression","start":326,"end":330},"property":{"type":"Identifier","start":331,"end":336,"name":"state"},"computed":false,"optional":false}],"optional":false}}]}},{"type":"Literal","start":353,"end":357,"value":1000,"raw":"1000"}],"optional":false}}]}}},{"type":"MethodDefinition","start":377,"end":2040,"static":false,"computed":false,"key":{"type":"Identifier","start":377,"end":383,"name":"render"},"kind":"method","value":{"type":"FunctionExpression","start":383,"end":2040,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":386,"end":2040,"body":[{"type":"ReturnStatement","start":400,"end":2030,"argument":{"type":"JSXElement","start":425,"end":2016,"openingElement":{"type":"JSXOpeningElement","start":425,"end":497,"attributes":[{"type":"JSXAttribute","start":430,"end":496,"name":{"type":"JSXIdentifier","start":430,"end":435,"name":"style"},"value":{"type":"JSXExpressionContainer","start":436,"end":496,"expression":{"type":"ObjectExpression","start":437,"end":495,"properties":[{"type":"Property","start":439,"end":462,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":439,"end":454,"name":"backgroundColor"},"value":{"type":"Literal","start":456,"end":462,"value":"#eee","raw":"'#eee'"},"kind":"init"},{"type":"Property","start":464,"end":477,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":464,"end":469,"name":"width"},"value":{"type":"Literal","start":471,"end":477,"value":"100%","raw":"'100%'"},"kind":"init"},{"type":"Property","start":479,"end":493,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":479,"end":485,"name":"height"},"value":{"type":"Literal","start":487,"end":493,"value":"100%","raw":"'100%'"},"kind":"init"}]}}}],"name":{"type":"JSXIdentifier","start":426,"end":429,"name":"box"},"selfClosing":false},"closingElement":{"type":"JSXClosingElement","start":2010,"end":2016,"name":{"type":"JSXIdentifier","start":2012,"end":2015,"name":"box"}},"children":[{"type":"JSXText","start":497,"end":518,"value":"\n                    ","raw":"\n                    "},{"type":"JSXElement","start":518,"end":762,"openingElement":{"type":"JSXOpeningElement","start":518,"end":562,"attributes":[{"type":"JSXAttribute","start":524,"end":561,"name":{"type":"JSXIdentifier","start":524,"end":529,"name":"style"},"value":{"type":"JSXExpressionContainer","start":530,"end":561,"expression":{"type":"ObjectExpression","start":531,"end":560,"properties":[{"type":"Property","start":533,"end":546,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":533,"end":538,"name":"width"},"value":{"type":"Literal","start":540,"end":546,"value":"100%","raw":"'100%'"},"kind":"init"},{"type":"Property","start":548,"end":558,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":548,"end":554,"name":"height"},"value":{"type":"Literal","start":556,"end":558,"value":56,"raw":"56"},"kind":"init"}]}}}],"name":{"type":"JSXIdentifier","start":519,"end":523,"name":"tabs"},"selfClosing":false},"closingElement":{"type":"JSXClosingElement","start":755,"end":762,"name":{"type":"JSXIdentifier","start":757,"end":761,"name":"tabs"}},"children":[{"type":"JSXText","start":562,"end":587,"value":"\n                        ","raw":"\n                        "},{"type":"JSXElement","start":587,"end":619,"openingElement":{"type":"JSXOpeningElement","start":587,"end":600,"attributes":[],"name":{"type":"JSXIdentifier","start":588,"end":599,"name":"primary-tab"},"selfClosing":false},"closingElement":{"type":"JSXClosingElement","start":605,"end":619,"name":{"type":"JSXIdentifier","start":607,"end":618,"name":"primary-tab"}},"children":[{"type":"JSXText","start":600,"end":605,"value":"Video","raw":"Video"}]},{"type":"JSXText","start":619,"end":644,"value":"\n                        ","raw":"\n                        "},{"type":"JSXElement","start":644,"end":677,"openingElement":{"type":"JSXOpeningElement","start":644,"end":657,"attributes":[],"name":{"type":"JSXIdentifier","start":645,"end":656,"name":"primary-tab"},"selfClosing":false},"closingElement":{"type":"JSXClosingElement","start":663,"end":677,"name":{"type":"JSXIdentifier","start":665,"end":676,"name":"primary-tab"}},"children":[{"type":"JSXText","start":657,"end":663,"value":"Photos","raw":"Photos"}]},{"type":"JSXText","start":677,"end":702,"value":"\n                        ","raw":"\n                        "},{"type":"JSXElement","start":702,"end":734,"openingElement":{"type":"JSXOpeningElement","start":702,"end":715,"attributes":[],"name":{"type":"JSXIdentifier","start":703,"end":714,"name":"primary-tab"},"selfClosing":false},"closingElement":{"type":"JSXClosingElement","start":720,"end":734,"name":{"type":"JSXIdentifier","start":722,"end":733,"name":"primary-tab"}},"children":[{"type":"JSXText","start":715,"end":720,"value":"Audio","raw":"Audio"}]},{"type":"JSXText","start":734,"end":755,"value":"\n                    ","raw":"\n                    "}]},{"type":"JSXText","start":762,"end":783,"value":"\n                    ","raw":"\n                    "},{"type":"JSXElement","start":783,"end":1993,"openingElement":{"type":"JSXOpeningElement","start":783,"end":925,"attributes":[{"type":"JSXAttribute","start":788,"end":924,"name":{"type":"JSXIdentifier","start":788,"end":793,"name":"style"},"value":{"type":"JSXExpressionContainer","start":794,"end":924,"expression":{"type":"ObjectExpression","start":795,"end":923,"properties":[{"type":"Property","start":797,"end":810,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":797,"end":802,"name":"width"},"value":{"type":"Literal","start":804,"end":810,"value":"100%","raw":"'100%'"},"kind":"init"},{"type":"Property","start":812,"end":839,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":812,"end":818,"name":"height"},"value":{"type":"Literal","start":820,"end":839,"value":"calc(100% - 56px)","raw":"'calc(100% - 56px)'"},"kind":"init"},{"type":"Property","start":841,"end":856,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":841,"end":848,"name":"display"},"value":{"type":"Literal","start":850,"end":856,"value":"flex","raw":"'flex'"},"kind":"init"},{"type":"Property","start":858,"end":874,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":858,"end":866,"name":"flexWrap"},"value":{"type":"Literal","start":868,"end":874,"value":"wrap","raw":"'wrap'"},"kind":"init"},{"type":"Property","start":876,"end":893,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":876,"end":885,"name":"overflowY"},"value":{"type":"Literal","start":887,"end":893,"value":"auto","raw":"'auto'"},"kind":"init"},{"type":"Property","start":895,"end":921,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":895,"end":907,"name":"alignContent"},"value":{"type":"Literal","start":909,"end":921,"value":"flex-start","raw":"'flex-start'"},"kind":"init"}]}}}],"name":{"type":"JSXIdentifier","start":784,"end":787,"name":"box"},"selfClosing":false},"closingElement":{"type":"JSXClosingElement","start":1987,"end":1993,"name":{"type":"JSXIdentifier","start":1989,"end":1992,"name":"box"}},"children":[{"type":"JSXText","start":925,"end":950,"value":"\n                        ","raw":"\n                        "},{"type":"JSXExpressionContainer","start":950,"end":1966,"expression":{"type":"CallExpression","start":980,"end":1940,"callee":{"type":"MemberExpression","start":980,"end":1000,"object":{"type":"MemberExpression","start":980,"end":996,"object":{"type":"MemberExpression","start":980,"end":990,"object":{"type":"ThisExpression","start":980,"end":984},"property":{"type":"Identifier","start":985,"end":990,"name":"state"},"computed":false,"optional":false},"property":{"type":"Identifier","start":991,"end":996,"name":"items"},"computed":false,"optional":false},"property":{"type":"Identifier","start":997,"end":1000,"name":"map"},"computed":false,"optional":false},"arguments":[{"type":"ArrowFunctionExpression","start":1001,"end":1939,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1001,"end":1005,"name":"item"}],"body":{"type":"BlockStatement","start":1009,"end":1939,"body":[{"type":"ReturnStatement","start":1043,"end":1909,"argument":{"type":"JSXElement","start":1088,"end":1875,"openingElement":{"type":"JSXOpeningElement","start":1088,"end":1152,"attributes":[{"type":"JSXAttribute","start":1094,"end":1104,"name":{"type":"JSXIdentifier","start":1094,"end":1097,"name":"key"},"value":{"type":"JSXExpressionContainer","start":1098,"end":1104,"expression":{"type":"Identifier","start":1099,"end":1103,"name":"item"}}},{"type":"JSXAttribute","start":1105,"end":1151,"name":{"type":"JSXIdentifier","start":1105,"end":1110,"name":"style"},"value":{"type":"JSXExpressionContainer","start":1111,"end":1151,"expression":{"type":"ObjectExpression","start":1112,"end":1150,"properties":[{"type":"Property","start":1114,"end":1123,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1114,"end":1120,"name":"margin"},"value":{"type":"Literal","start":1122,"end":1123,"value":8,"raw":"8"},"kind":"init"},{"type":"Property","start":1125,"end":1135,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1125,"end":1130,"name":"width"},"value":{"type":"Literal","start":1132,"end":1135,"value":100,"raw":"100"},"kind":"init"},{"type":"Property","start":1137,"end":1148,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1137,"end":1143,"name":"height"},"value":{"type":"Literal","start":1145,"end":1148,"value":100,"raw":"100"},"kind":"init"}]}}}],"name":{"type":"JSXIdentifier","start":1089,"end":1093,"name":"card"},"selfClosing":false},"closingElement":{"type":"JSXClosingElement","start":1868,"end":1875,"name":{"type":"JSXIdentifier","start":1870,"end":1874,"name":"card"}},"children":[{"type":"JSXText","start":1152,"end":1193,"value":"\n                                        ","raw":"\n                                        "},{"type":"JSXElement","start":1193,"end":1365,"openingElement":{"type":"JSXOpeningElement","start":1193,"end":1365,"attributes":[{"type":"JSXAttribute","start":1199,"end":1210,"name":{"type":"JSXIdentifier","start":1199,"end":1203,"name":"text"},"value":{"type":"JSXExpressionContainer","start":1204,"end":1210,"expression":{"type":"Identifier","start":1205,"end":1209,"name":"item"}}},{"type":"JSXAttribute","start":1211,"end":1362,"name":{"type":"JSXIdentifier","start":1211,"end":1216,"name":"style"},"value":{"type":"JSXExpressionContainer","start":1217,"end":1362,"expression":{"type":"ObjectExpression","start":1218,"end":1361,"properties":[{"type":"Property","start":1219,"end":1232,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1219,"end":1224,"name":"width"},"value":{"type":"Literal","start":1226,"end":1232,"value":"100%","raw":"'100%'"},"kind":"init"},{"type":"Property","start":1234,"end":1248,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1234,"end":1240,"name":"height"},"value":{"type":"Literal","start":1242,"end":1248,"value":"100%","raw":"'100%'"},"kind":"init"},{"type":"Property","start":1250,"end":1265,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1250,"end":1257,"name":"display"},"value":{"type":"Literal","start":1259,"end":1265,"value":"flex","raw":"'flex'"},"kind":"init"},{"type":"Property","start":1267,"end":1290,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1267,"end":1280,"name":"verticalAlign"},"value":{"type":"Literal","start":1282,"end":1290,"value":"middle","raw":"'middle'"},"kind":"init"},{"type":"Property","start":1292,"end":1311,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1292,"end":1301,"name":"textAlign"},"value":{"type":"Literal","start":1303,"end":1311,"value":"center","raw":"'center'"},"kind":"init"},{"type":"Property","start":1313,"end":1333,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1313,"end":1323,"name":"alignItems"},"value":{"type":"Literal","start":1325,"end":1333,"value":"center","raw":"'center'"},"kind":"init"},{"type":"Property","start":1335,"end":1359,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1335,"end":1349,"name":"justifyContent"},"value":{"type":"Literal","start":1351,"end":1359,"value":"center","raw":"'center'"},"kind":"init"}]}}}],"name":{"type":"JSXIdentifier","start":1194,"end":1198,"name":"text"},"selfClosing":true},"closingElement":null,"children":[]},{"type":"JSXText","start":1365,"end":1406,"value":"\n                                        ","raw":"\n                                        "},{"type":"JSXElement","start":1406,"end":1831,"openingElement":{"type":"JSXOpeningElement","start":1406,"end":1534,"attributes":[{"type":"JSXAttribute","start":1411,"end":1533,"name":{"type":"JSXIdentifier","start":1411,"end":1416,"name":"style"},"value":{"type":"JSXExpressionContainer","start":1417,"end":1533,"expression":{"type":"ObjectExpression","start":1418,"end":1532,"properties":[{"type":"Property","start":1419,"end":1432,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1419,"end":1424,"name":"width"},"value":{"type":"Literal","start":1426,"end":1432,"value":"100%","raw":"'100%'"},"kind":"init"},{"type":"Property","start":1434,"end":1444,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1434,"end":1440,"name":"height"},"value":{"type":"Literal","start":1442,"end":1444,"value":32,"raw":"32"},"kind":"init"},{"type":"Property","start":1446,"end":1466,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1446,"end":1456,"name":"alignItems"},"value":{"type":"Literal","start":1458,"end":1466,"value":"center","raw":"'center'"},"kind":"init"},{"type":"Property","start":1468,"end":1492,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1468,"end":1482,"name":"justifyContent"},"value":{"type":"Literal","start":1484,"end":1492,"value":"center","raw":"'center'"},"kind":"init"},{"type":"Property","start":1494,"end":1513,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1494,"end":1503,"name":"textAlign"},"value":{"type":"Literal","start":1505,"end":1513,"value":"center","raw":"'center'"},"kind":"init"},{"type":"Property","start":1515,"end":1530,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1515,"end":1522,"name":"display"},"value":{"type":"Literal","start":1524,"end":1530,"value":"flex","raw":"'flex'"},"kind":"init"}]}}}],"name":{"type":"JSXIdentifier","start":1407,"end":1410,"name":"box"},"selfClosing":false},"closingElement":{"type":"JSXClosingElement","start":1825,"end":1831,"name":{"type":"JSXIdentifier","start":1827,"end":1830,"name":"box"}},"children":[{"type":"JSXText","start":1534,"end":1579,"value":"\n                                            ","raw":"\n                                            "},{"type":"JSXElement","start":1579,"end":1685,"openingElement":{"type":"JSXOpeningElement","start":1579,"end":1685,"attributes":[{"type":"JSXAttribute","start":1587,"end":1618,"name":{"type":"JSXIdentifier","start":1587,"end":1592,"name":"style"},"value":{"type":"JSXExpressionContainer","start":1593,"end":1618,"expression":{"type":"ObjectExpression","start":1594,"end":1617,"properties":[{"type":"Property","start":1595,"end":1604,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1595,"end":1600,"name":"width"},"value":{"type":"Literal","start":1602,"end":1604,"value":32,"raw":"32"},"kind":"init"},{"type":"Property","start":1606,"end":1616,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1606,"end":1612,"name":"height"},"value":{"type":"Literal","start":1614,"end":1616,"value":32,"raw":"32"},"kind":"init"}]}}},{"type":"JSXAttribute","start":1619,"end":1630,"name":{"type":"JSXIdentifier","start":1619,"end":1626,"name":"caption"},"value":{"type":"Literal","start":1627,"end":1630,"value":"-","raw":"'-'"}},{"type":"JSXAttribute","start":1631,"end":1682,"name":{"type":"JSXIdentifier","start":1631,"end":1638,"name":"onClick"},"value":{"type":"JSXExpressionContainer","start":1639,"end":1682,"expression":{"type":"ArrowFunctionExpression","start":1640,"end":1681,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":1646,"end":1681,"callee":{"type":"MemberExpression","start":1646,"end":1657,"object":{"type":"Identifier","start":1646,"end":1653,"name":"console"},"property":{"type":"Identifier","start":1654,"end":1657,"name":"log"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":1658,"end":1680,"value":"test................","raw":"'test................'"}],"optional":false}}}}],"name":{"type":"JSXIdentifier","start":1580,"end":1586,"name":"button"},"selfClosing":true},"closingElement":null,"children":[]},{"type":"JSXText","start":1685,"end":1730,"value":"\n                                            ","raw":"\n                                            "},{"type":"JSXElement","start":1730,"end":1784,"openingElement":{"type":"JSXOpeningElement","start":1730,"end":1784,"attributes":[{"type":"JSXAttribute","start":1738,"end":1769,"name":{"type":"JSXIdentifier","start":1738,"end":1743,"name":"style"},"value":{"type":"JSXExpressionContainer","start":1744,"end":1769,"expression":{"type":"ObjectExpression","start":1745,"end":1768,"properties":[{"type":"Property","start":1746,"end":1755,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1746,"end":1751,"name":"width"},"value":{"type":"Literal","start":1753,"end":1755,"value":32,"raw":"32"},"kind":"init"},{"type":"Property","start":1757,"end":1767,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1757,"end":1763,"name":"height"},"value":{"type":"Literal","start":1765,"end":1767,"value":32,"raw":"32"},"kind":"init"}]}}},{"type":"JSXAttribute","start":1770,"end":1781,"name":{"type":"JSXIdentifier","start":1770,"end":1777,"name":"caption"},"value":{"type":"Literal","start":1778,"end":1781,"value":"+","raw":"'+'"}}],"name":{"type":"JSXIdentifier","start":1731,"end":1737,"name":"button"},"selfClosing":true},"closingElement":null,"children":[]},{"type":"JSXText","start":1784,"end":1825,"value":"\n                                        ","raw":"\n                                        "}]},{"type":"JSXText","start":1831,"end":1868,"value":"\n                                    ","raw":"\n                                    "}]}}]}}],"optional":false}},{"type":"JSXText","start":1966,"end":1987,"value":"\n                    ","raw":"\n                    "}]},{"type":"JSXText","start":1993,"end":2010,"value":"\n                ","raw":"\n                "}]}}]}}}]}}],"sourceType":"module"}
    )

    let uiRoot

    const crawl = (newEl, oldEl) => {
        console.log(newEl)
        if (newEl._props) {
            for (let propKey in newEl._props) {
                if (newEl._props[propKey]._value?.__state__ === 'updated' || newEl._props[propKey]._value?.__state__ === 'updated') {
                    let newValue = newEl._props[propKey]._value.__value__
                    oldEl._props[propKey] = { _value: newValue, _defaultValue: oldEl._props[propKey]._defaultValue, _type: oldEl._props[propKey]._type }
                    uiDriver.updateProp(oldEl, propKey, newValue)
                } else if (newEl._props[propKey]._value?.__state__ === 'deleted') {
                    delete oldEl._props[propKey]
                }
            }
        }
        if (newEl._styles) {
            for (let key in newEl._styles) {
                oldEl._styles[key] = newEl._styles[key]
                let cssValue = Utils.compiler.buildValue(key, newEl._styles[key])
                uiDriver.updateStyle(oldEl, key, newValue)
            }
        }
        if (newEl._children) {
            if (newEl._children.__state__ === 'created') {
                oldEl._children = newEl._children.__value__
            } else {
                let modifiedChilrenArray = {}
                for (let i = 0; i < oldEl._children.length; i++) {
                    modifiedChilrenArray[i + ''] = oldEl._children[i]
                }
                for (let arrayIndex in newEl._children) {
                    let child = newEl._children[arrayIndex]
                    if (child.__state__ === 'created') {
                        modifiedChilrenArray[Number(arrayIndex)] = child.__value__
                        uiDriver.createChild(child.__value__, oldEl._key)
                    } else if (child.__state__ === 'updated') {
                        modifiedChilrenArray[Number(arrayIndex)] = child.__value__
                        uiDriver.replaceChild(oldEl, child.__value__)
                    } else if (child.__state__ !== 'deleted') {
                        crawl(child, oldEl._children[Number(arrayIndex)])
                    }
                }
                Object.keys(newEl._children).map(k => Number(k)).sort().reverse().forEach(k => {
                    let child = newEl._children[k + '']
                    if (child.__state__ === 'deleted') {
                        uiDriver.deleteChild(modifiedChilrenArray[k]._key)
                        delete modifiedChilrenArray[k]
                    }
                });
                oldEl._children = Object.keys(modifiedChilrenArray).map(k => modifiedChilrenArray[Number(k)])
            }
        }
    }

    const update = (u) => {
        console.log(Utils.json.prettify(u))
        crawl(u, uiRoot)
    }

    applet.run('Button', (mod) => new Native(mod), update).then((runnable) => {
        console.log(Utils.json.prettify(runnable.root))
        uiRoot = runnable.root
        let ui = uiDriver.build(runnable.root)
        root.appendChild(ui)
        runnable.mount()
    })

</script>

</html>